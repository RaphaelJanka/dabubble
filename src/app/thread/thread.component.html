<mat-card (click)="closeEmojiPicker()">
  <mat-card-header>
    <header>
      <div class="header">
        <span class="title">Thread</span>
        <span class="channel-title color-purple2-text">{{this.threadService.currentChat.name}}</span>
      </div>
      <button mat-icon-button class="close-thread" (click)="onCloseClick()">
        <img class="close-icon" src="assets/img/icons/close.svg" alt="close">
      </button>
    </header>
  </mat-card-header>

  <mat-card-content class="p-0 main-chat-container">

    <section> <!-- Main Commment -->
      <div class="message-row-container">
        <div class="message-box">
          <div class="message-avatar-container">
            <img src="{{this.threadService.currentMessage.profilePic}}" alt="" />
          </div>
          <div class="message-container">
            <div class="message-data">
              <span class="name">{{this.threadService.currentMessage.creator}}</span>
              <span class="date">{{this.threadService.currentMessage.time}}</span>
            </div>

            <div class="message message-content">
              <span>{{this.threadService.currentMessage.content}}</span>
            </div>
          </div>
        
        </div>
      </div>
    </section>


    <section> <!-- Oberste section fÃ¼r Kommentar_bereich -->
      <!-- separator -->
      <div class="comments-container">
        <span *ngIf="allThreadMessages.length == 1" class="comments">{{allThreadMessages.length}}
          Reply</span>
        <span *ngIf="allThreadMessages.length >= 2" class="comments">{{allThreadMessages.length}}
          Replies</span>
        <div class="separator"></div>
      </div>

      <div class="message-row-container" *ngFor="let thread of this.allThreadMessages;"
        [ngClass]="{'my-messages': thread.creatorId == currentUser.id}">
        <div class="message-box">
          <div class="message-avatar-container">
            <img src="assets/img/avatars/avatar_male2.svg"/>
          </div>

          <div class="message-container">
            <div class="message-data">
              <span class="name">{{thread.creator}}</span>
              <span class="date">{{thread.time}}</span>
            </div>

            <div class="message" [ngClass]="{'my-message-content': thread.creator == currentUser.name, 'message-content': thread.creator != currentUser.name}">
              <span>{{thread.content}}</span>
            </div>

            <div class="reaction-emoji-container">
              <button class="reaction-emoji-button" *ngFor="let emoji of thread.reactionCount | keyvalue" >
                <span class="emoji-fit">{{emoji.key}}</span>
                <span>{{emoji.value}}</span>
              </button>
            </div>
          </div>
        </div>
        
        <div class="reaction" [ngClass]="{'own-message': thread.creator == currentUser.name}">
          <button mat-icon-button (click)="addReaction('âœ…', thread.id)">
            <img src="assets/img/emojis/checkGreen.svg" alt="">
          </button>
          <button mat-icon-button (click)="addReaction('ðŸ™Œ', thread.id)"> 
            <img src="assets/img/emojis/hands.svg" alt="">
          </button>
          <button mat-icon-button (click)="openEmojiPicker(thread.id)" >
            <img src="assets/img/icons/add_reaction.svg" alt="">
          </button>
          <button mat-icon-button *ngIf="message.creator == currentUser.name">
            <img src="assets/img/icons/edit_square.svg" alt="">
          </button>
        </div>
      </div>
      <emoji-mart *ngIf="this.emojiService.showThreadEmojiPicker == true" class="emojiPicker" (emojiClick)="addEmoji($event)"></emoji-mart>
    </section>

  </mat-card-content>

  <mat-card-content class="textfield-content">
    <div class="text-field-container">
      <textarea [(ngModel)]="message.content" placeholder="Comment"></textarea>

      <div class="message-buttons">
        <div class="attachments">
          <div class="border-right">
            <button mat-icon-button class="textfield-buttons">
              <img src="assets/img/icons/add.svg" alt="" />
            </button>
          </div>

          <button mat-icon-button class="textfield-buttons">
            <img src="assets/img/icons/smiley.svg" alt="" />
          </button>

          <button mat-icon-button class="textfield-buttons">
            <img src="assets/img/icons/@.svg" alt="" />
          </button>
        </div>

        <button (click)="addMessageToThread()" mat-icon-button class="textfield-buttons">
          <img src="assets/img/icons/send.svg" alt="" />
        </button>
      </div>
    </div>
  </mat-card-content>
</mat-card>